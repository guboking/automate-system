# 股票分析工作流

## 1. 数据获取流程

1. **先查本地缓存** `/Users/a123/stock_cache/data/`
2. **缓存有效性检查**：
   - 价格数据：24小时
   - 公司信息：7天
   - 新闻数据：6小时
3. **缓存策略**：
   - 有效 → 直接使用缓存数据
   - 过期 → Playwright 爬取 → 写入缓存

## 2. 数据爬取流程

爬取目标页面：
- 概览页
- 财务页
- 历史价格页
- 新闻页

爬取工具：
- 使用 `browser_snapshot` + `browser_evaluate`

## 3. 股票代码格式

| 市场 | 格式 | 示例 |
|------|------|------|
| A股沪市 | {代码}.SS | 603993.SS |
| A股深市 | {代码}.SZ | 000001.SZ |
| 港股 | {代码}.HK | 3993.HK |

## 4. 缓存目录结构

```
/Users/a123/stock_cache/
├── cache_index.json      # 缓存索引，记录各数据的更新时间
├── data/{symbol}.json    # 各股票的缓存数据
└── reports/              # 生成的分析报告
```
