# è‚¡ç¥¨åˆ†æç³»ç»Ÿ

## è§¦å‘æ¡ä»¶

å½“ç”¨æˆ·æåˆ°ä»¥ä¸‹å…³é”®è¯æ—¶ï¼Œå¯åŠ¨æœ¬å·¥ä½œæµï¼š
- ã€Œåˆ†æ XXX è‚¡ç¥¨ã€ã€Œçœ‹çœ‹ XXXã€ã€ŒXXX æ€ä¹ˆæ ·ã€
- ã€Œåˆ·æ–° XXX æ•°æ®ã€ã€Œæ›´æ–° XXXã€
- ã€Œå¯¹æ¯” A å’Œ Bã€ã€ŒXXX vs YYYã€

---

## 1. æ‰§è¡Œæµç¨‹

```
ç”¨æˆ·è¯·æ±‚
    â†“
è¯†åˆ«è‚¡ç¥¨ä»£ç  â†’ è½¬æ¢ä¸ºæ ‡å‡†æ ¼å¼ï¼ˆè§ä»£ç æ ¼å¼è¡¨ï¼‰
    â†“
æ£€æŸ¥ç¼“å­˜ ./stock_cache/data/{symbol}.json
    â†“
â”Œâ”€ ç¼“å­˜å­˜åœ¨ä¸”æœªè¿‡æœŸ â†’ ç›´æ¥è¯»å–ï¼Œè¾“å‡ºåˆ†æ
â”‚
â””â”€ ç¼“å­˜ä¸å­˜åœ¨æˆ–å·²è¿‡æœŸ â†’ è·å–æ–°æ•°æ® â†’ å†™å…¥ç¼“å­˜ â†’ è¾“å‡ºåˆ†æ
```

## 2. ç¼“å­˜ç­–ç•¥

### 2.1 æœ‰æ•ˆæœŸåˆ¤æ–­

```python
# ä¼ªä»£ç é€»è¾‘
def is_expired(updated_at, data_type):
    age = now() - updated_at
    limits = {
        "price": 24å°æ—¶,      # è¡Œæƒ…æ•°æ®ï¼Œæ¯æ—¥æ›´æ–°
        "fundamentals": 7å¤©,  # è´¢æŠ¥æ•°æ®ï¼Œå­£åº¦æ›´æ–°
        "news": 6å°æ—¶,        # æ–°é—»èµ„è®¯ï¼Œé¢‘ç¹æ›´æ–°
        "analyst": 3å¤©        # æœºæ„è¯„çº§ï¼Œå®šæœŸæ›´æ–°
    }
    return age > limits[data_type]
```

### 2.2 ç¼“å­˜æ›´æ–°è§„åˆ™

| åœºæ™¯ | åŠ¨ä½œ |
|------|------|
| æ— ç¼“å­˜ | å…¨é‡è·å–æ‰€æœ‰æ•°æ® |
| ä»·æ ¼è¿‡æœŸ | ä»…æ›´æ–° price å­—æ®µ |
| æ–°é—»è¿‡æœŸ | ä»…æ›´æ–° news å­—æ®µ |
| ç”¨æˆ·è¯´ã€Œåˆ·æ–°ã€ | å¼ºåˆ¶å…¨é‡æ›´æ–° |

---

## 3. æ•°æ®ç»“æ„

### 3.1 æ ‡å‡†æ•°æ®å­—æ®µ

```json
{
  "symbol": "002594.SZ",
  "name": "æ¯”äºšè¿ª",
  "market": "Aè‚¡æ·±å¸‚",
  "updated_at": "2025-12-07T14:00:00Z",

  "price": {
    "current": 95.98,
    "prev_close": 95.24,
    "change_pct": "+0.78%",
    "range_day": [94.71, 96.22],
    "range_52w": [87.40, 138.99],
    "volume": "35.92ä¸‡æ‰‹",
    "turnover": "34.84äº¿å…ƒ"
  },

  "fundamentals": {
    "revenue_ytd": "5662.66äº¿å…ƒ",
    "revenue_growth": "+12.75%",
    "net_profit_ytd": "233.33äº¿å…ƒ",
    "profit_growth": "-7.55%",
    "gross_margin": "17.87%",
    "pe_ratio": null,
    "pb_ratio": null
  },

  "analyst": {
    "target_price_avg": 129.78,
    "target_price_high": 167,
    "target_price_low": 92,
    "buy_ratings": 28,
    "hold_ratings": 0,
    "sell_ratings": 2,
    "upside": "+35.22%"
  },

  "capital_flow": {
    "main_net": "+3.44äº¿å…ƒ",
    "retail_net": "-2.31äº¿å…ƒ",
    "north_net": null
  },

  "technical": {
    "ma5": null,
    "ma20": null,
    "support": null,
    "resistance": null,
    "signal": null
  },

  "news": []
}
```

### 3.2 è‚¡ç¥¨ä»£ç æ ¼å¼

| å¸‚åœº | æ ¼å¼ | ç¤ºä¾‹ | è¯†åˆ«è§„åˆ™ |
|------|------|------|----------|
| Aè‚¡æ²ªå¸‚ | {6ä½}.SS | 603993.SS | 60/68å¼€å¤´ |
| Aè‚¡æ·±å¸‚ | {6ä½}.SZ | 000001.SZ | 00/30/002å¼€å¤´ |
| æ¸¯è‚¡ | {4-5ä½}.HK | 1211.HK | çº¯æ•°å­— |
| ç¾è‚¡ | {å­—æ¯} | TSLA | çº¯å­—æ¯ |

---

## 4. åˆ†ææŠ¥å‘Šæ¨¡æ¿

è¾“å‡ºæŠ¥å‘Šåº”åŒ…å«ä»¥ä¸‹æ¨¡å—ï¼š

### ğŸ“Š è‚¡ä»·æ¦‚è§ˆ
- ç°ä»·ã€æ¶¨è·Œå¹…ã€52å‘¨åŒºé—´
- å½“å‰ä½ç½®ï¼ˆé«˜ä½/ä¸­ä½/ä½ä½ï¼‰

### ğŸ“ˆ åŸºæœ¬é¢åˆ†æ
- è¥æ”¶ã€åˆ©æ¶¦åŠå¢é€Ÿ
- æ¯›åˆ©ç‡ã€PEã€PB
- åŒæ¯”ç¯æ¯”å˜åŒ–

### ğŸ¯ æœºæ„è§‚ç‚¹
- ç›®æ ‡ä»·åŒºé—´
- ä¹°å…¥/å–å‡ºè¯„çº§æ•°
- æ½œåœ¨æ¶¨å¹…

### ğŸ’° èµ„é‡‘æµå‘
- ä¸»åŠ›/æ•£æˆ·åŠ¨å‘
- åŒ—å‘èµ„é‡‘ï¼ˆå¦‚æœ‰ï¼‰

### âš ï¸ é£é™©æç¤º
- æŠ€æœ¯é¢ä¿¡å·
- éœ€å…³æ³¨çš„é£é™©ç‚¹

---

## 5. æ•°æ®è·å–ä¼˜å…ˆçº§

1. **WebSearch** - å¿«é€Ÿè·å–æœ€æ–°è¡Œæƒ…å’Œæ–°é—»
2. **WebFetch** - æŠ“å–ç‰¹å®šè´¢ç»ç½‘ç«™è¯¦æƒ…é¡µ
3. **Playwright** - å¤æ‚é¡µé¢çˆ¬å–ï¼ˆéœ€ browser å·¥å…·ï¼‰

å¸¸ç”¨æ•°æ®æºï¼š
- ä¸œæ–¹è´¢å¯Œï¼š`quote.eastmoney.com`
- é›ªçƒï¼š`xueqiu.com`
- Yahoo Financeï¼š`finance.yahoo.com`
- Investing.comï¼š`investing.com`

---

## 6. ç›®å½•ç»“æ„

```
./stock_cache/
â”œâ”€â”€ cache_index.json          # ç´¢å¼•ï¼šè®°å½•æ¯åªè‚¡ç¥¨çš„æ›´æ–°æ—¶é—´
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ {symbol}.json         # å•è‚¡æ•°æ®æ–‡ä»¶
â”‚   â””â”€â”€ ...
â””â”€â”€ reports/
    â””â”€â”€ {symbol}_{date}.md    # åˆ†ææŠ¥å‘Šå­˜æ¡£
```

---

## 7. ä½¿ç”¨ç¤ºä¾‹

| ç”¨æˆ·è¯´ | Claude åŠ¨ä½œ |
|--------|-------------|
| ã€Œåˆ†ææ¯”äºšè¿ªã€ | æŸ¥ç¼“å­˜ â†’ æœ‰æ•ˆåˆ™è¯»å– â†’ è¾“å‡ºåˆ†æ |
| ã€Œåˆ·æ–°æ¯”äºšè¿ªæ•°æ®ã€ | å¼ºåˆ¶è·å–æœ€æ–°æ•°æ® â†’ æ›´æ–°ç¼“å­˜ â†’ è¾“å‡ºåˆ†æ |
| ã€Œæ¯”äºšè¿ª vs ç‰¹æ–¯æ‹‰ã€ | åˆ†åˆ«è·å–ä¸¤åªè‚¡ç¥¨ â†’ å¯¹æ¯”åˆ†æ |
| ã€Œæœ€è¿‘åˆ†æè¿‡å“ªäº›è‚¡ç¥¨ã€ | è¯»å– cache_index.json åˆ—å‡º |

---

# Claude Code é€ŸæŸ¥æŒ‡å— (v2.0.x)

## æ€è€ƒæ¨¡å¼
- `think` - æ ‡å‡†æ€è€ƒï¼Œä¸€èˆ¬å¤æ‚é—®é¢˜
- `think harder` - æ·±åº¦æ€è€ƒï¼Œæ¶æ„è®¾è®¡
- `ultrathink` - ææ·±æ€è€ƒï¼Œç³»ç»Ÿçº§è®¾è®¡
- Tabé”®åˆ‡æ¢æ€è€ƒæ¨¡å¼ | `/t` å‰ç¼€ä¸´æ—¶ç¦ç”¨

## è®¡åˆ’æ¨¡å¼
- `Shift+Tab` (Mac) / `Alt+M` (Win) è¿›å…¥
- æµç¨‹ï¼šéœ€æ±‚ â†’ åˆ¶å®šè®¡åˆ’ â†’ å®¡æŸ¥(æ‹’ç»/ä¿®æ”¹/æ‰¹å‡†) â†’ æ‰§è¡Œ
- `claude --model opus plan` å¯åŠ¨æ—¶æŒ‡å®šOpusè§„åˆ’+Sonnetæ‰§è¡Œ

## æ ¸å¿ƒå‘½ä»¤
| å‘½ä»¤ | åŠŸèƒ½ |
|------|------|
| `/rewind` | å›é€€åˆ°å†å²æ£€æŸ¥ç‚¹ï¼Œæ’¤é”€ä»£ç æ›´æ”¹ |
| `/compact` | æ‰‹åŠ¨å‹ç¼©å¯¹è¯ï¼Œé‡Šæ”¾ä¸Šä¸‹æ–‡ |
| `/resume` | é€‰æ‹©å†å²å¯¹è¯æ¢å¤ |
| `/export` | å¯¼å‡ºå½“å‰å¯¹è¯ |
| `/tasks` | æŸ¥çœ‹åå°ä»»åŠ¡ |
| `/mcp` | åˆ‡æ¢MCPæœåŠ¡å™¨çŠ¶æ€ |

## å¿«æ·é”®
| é”® | åŠŸèƒ½ |
|----|------|
| `Tab` | æ–‡ä»¶è¡¥å…¨/åˆ‡æ¢æ€è€ƒæ¨¡å¼ |
| `Shift+Tab` | åˆ‡æ¢è®¡åˆ’æ¨¡å¼/è‡ªåŠ¨æ¥å— |
| `Ctrl+B` | åå°è¿è¡Œå‘½ä»¤ |
| `Ctrl+R` | å†å²å‘½ä»¤æœç´¢ |
| `Ctrl+C` | ä¸­æ–­å½“å‰æ“ä½œ |
| `ESC` | åœæ­¢Claudeå·¥ä½œ |

## é…ç½®æ–‡ä»¶ä½ç½®
```
~/.claude/
â”œâ”€â”€ CLAUDE.md          # å…¨å±€æŒ‡ä»¤
â”œâ”€â”€ settings.json      # ç”¨æˆ·çº§è®¾ç½®
â”œâ”€â”€ commands/          # å…¨å±€è‡ªå®šä¹‰å‘½ä»¤
â””â”€â”€ mcp.json           # ç”¨æˆ·çº§MCPé…ç½®

é¡¹ç›®/.claude/
â”œâ”€â”€ settings.json      # é¡¹ç›®çº§è®¾ç½®
â”œâ”€â”€ commands/          # é¡¹ç›®çº§å‘½ä»¤
â”œâ”€â”€ agents/            # è‡ªå®šä¹‰ä»£ç†
â””â”€â”€ .mcp.json          # é¡¹ç›®çº§MCPé…ç½®
```

## è‡ªå®šä¹‰å‘½ä»¤æ ¼å¼ (.claude/commands/*.md)
```markdown
---
description: å‘½ä»¤æè¿°
model: opus|sonnet|haiku
allowed-tools: Read, Grep, Bash
argument-hint: <å‚æ•°æç¤º>
---

æç¤ºè¯å†…å®¹ï¼Œ$ARGUMENTS ä¸ºç”¨æˆ·å‚æ•°
```

## è‡ªå®šä¹‰ä»£ç†æ ¼å¼ (.claude/agents/*.md)
```markdown
---
description: ä»£ç†æè¿°
model: opus
permissionMode: bypassPermissions
disallowedTools: [Bash, Write]
---

è§’è‰²å®šä¹‰å’Œä¸“ä¸šæŒ‡ä»¤...
```
è°ƒç”¨ï¼š`@ä»£ç†å` æˆ–è®©Claudeè‡ªåŠ¨é€‰æ‹©

## é’©å­é…ç½® (settings.json)
```json
{
  "hooks": {
    "SessionStart": [{"command": "è„šæœ¬"}],
    "PostToolUse": [{"matcher": "Write", "command": "è„šæœ¬"}],
    "PreToolUse": [{"matcher": "Bash", "command": "éªŒè¯è„šæœ¬"}]
  }
}
```
é’©å­ç±»å‹ï¼šSessionStart/End, PreToolUse, PostToolUse, PermissionRequest, Stop

ç¯å¢ƒå˜é‡ï¼š`$CLAUDE_PROJECT_DIR`, `$CLAUDE_FILE_PATH`, `$CLAUDE_TOOL_INPUT`, `$CLAUDE_TOOL_OUTPUT`

## æƒé™è§„åˆ™ (settings.json)
```json
{
  "permissions": {
    "allow": ["Read", "Glob", "Bash(npm test:*)"],
    "deny": ["Bash(rm -rf:*)", "Bash(sudo:*)", "Write(.env*)"],
    "ask": ["Bash(npm install:*)", "Write(package.json)"]
  }
}
```

## MCPæœåŠ¡å™¨é…ç½® (.mcp.json)
```json
{
  "mcpServers": {
    "postgres": {
      "command": "npx",
      "args": ["-y", "@anthropic-ai/mcp-server-postgres"],
      "env": {"DATABASE_URL": "${DATABASE_URL}"}
    }
  }
}
```
å‘½ä»¤ï¼š`claude mcp add` | `claude mcp list` | `claude mcp add-from-claude-desktop`

## æ¨¡å‹é€‰æ‹©ç­–ç•¥
- **Opus**: æ¶æ„è®¾è®¡ã€å®‰å…¨å®¡è®¡ã€å¤æ‚é‡æ„
- **Sonnet**: æ—¥å¸¸å¼€å‘ã€ä»£ç å®¡æŸ¥ã€æµ‹è¯•ç¼–å†™
- **Haiku**: æ–‡æ¡£ç”Ÿæˆã€ç®€å•ä¿®å¤ã€Exploreå­ä»£ç†æ¢ç´¢

## Exploreå­ä»£ç†
è‡ªåŠ¨è§¦å‘ï¼šè¯¢é—®é¡¹ç›®ç»“æ„ã€åŠŸèƒ½å®šä½ã€APIç«¯ç‚¹æ—¶
æ‰‹åŠ¨æŒ‡å®šï¼š"ä½¿ç”¨Exploreä»£ç†å¿«é€Ÿäº†è§£src/servicesç›®å½•"
æ·±åº¦ï¼šquick | medium | very thorough

## æ²™ç›’æ¨¡å¼ (settings.json)
```json
{
  "sandbox": {
    "enabled": true,
    "allowUnsandboxedCommands": false
  }
}
```

## å·¥ä½œæµå»ºè®®
1. ç®€å•ä»»åŠ¡ç›´æ¥æ‰§è¡Œ
2. å¤æ‚ä»»åŠ¡ â†’ `Shift+Tab` è®¡åˆ’æ¨¡å¼ + `ultrathink`
3. é•¿å‘½ä»¤ â†’ `Ctrl+B` åå°è¿è¡Œ
4. å‡ºé”™ â†’ `/rewind` å›é€€
5. ä¸Šä¸‹æ–‡æ»¡ â†’ `/compact` å‹ç¼©
